---
source: crates/codegen/src/compile.rs
assertion_line: 6346
expression: "compile_exec(\"\\\nfor stop_exc in (StopIteration('spam'), StopAsyncIteration('ham')):\n    with self.subTest(type=type(stop_exc)):\n        try:\n            async with egg():\n                raise stop_exc\n        except Exception as ex:\n            self.assertIs(ex, stop_exc)\n        else:\n            self.fail(f'{stop_exc} was suppressed')\n\")"
---
  1           0 LOAD_NAME_ANY        (0, StopIteration)
              1 LOAD_CONST           ("spam")
              2 CALL_FUNCTION_POSITIONAL(1)
              3 LOAD_NAME_ANY        (1, StopAsyncIteration)
              4 LOAD_CONST           ("ham")
              5 CALL_FUNCTION_POSITIONAL(1)
              6 BUILD_TUPLE          (2)
              7 GET_ITER
        >>    8 FOR_ITER             (70)
              9 STORE_LOCAL          (2, stop_exc)

  2          10 LOAD_NAME_ANY        (3, self)
             11 LOAD_METHOD          (4, subTest)
             12 LOAD_NAME_ANY        (5, type)
             13 LOAD_NAME_ANY        (2, stop_exc)
             14 CALL_FUNCTION_POSITIONAL(1)
             15 LOAD_CONST           (("type"))
             16 CALL_METHOD_KEYWORD  (1)
             17 SETUP_WITH           (67)
             18 POP_TOP

  3          19 SETUP_EXCEPT         (41)

  4          20 LOAD_NAME_ANY        (6, egg)
             21 CALL_FUNCTION_POSITIONAL(0)
             22 BEFORE_ASYNC_WITH
             23 GET_AWAITABLE
             24 LOAD_CONST           (None)
             25 YIELD_FROM
             26 RESUME               (3)
             27 SETUP_ASYNC_WITH     (33)
             28 POP_TOP

  5          29 LOAD_NAME_ANY        (2, stop_exc)
             30 RAISE                (Raise)

  4          31 POP_BLOCK
             32 ENTER_FINALLY
        >>   33 WITH_CLEANUP_START
             34 GET_AWAITABLE
             35 LOAD_CONST           (None)
             36 YIELD_FROM
             37 RESUME               (3)
             38 WITH_CLEANUP_FINISH
             39 POP_BLOCK
             40 JUMP                 (57)
        >>   41 COPY                 (1)

  6          42 LOAD_NAME_ANY        (7, Exception)
             43 JUMP_IF_NOT_EXC_MATCH(56)
             44 STORE_LOCAL          (8, ex)

  7          45 LOAD_NAME_ANY        (3, self)
             46 LOAD_METHOD          (9, assertIs)
             47 LOAD_NAME_ANY        (8, ex)
             48 LOAD_NAME_ANY        (2, stop_exc)
             49 CALL_METHOD_POSITIONAL(2)
             50 POP_TOP
             51 POP_EXCEPTION
             52 LOAD_CONST           (None)
             53 STORE_LOCAL          (8, ex)
             54 DELETE_LOCAL         (8, ex)
             55 JUMP                 (65)
        >>   56 RAISE                (Reraise)

  9     >>   57 LOAD_NAME_ANY        (3, self)
             58 LOAD_METHOD          (10, fail)
             59 LOAD_NAME_ANY        (2, stop_exc)
             60 FORMAT_SIMPLE
             61 LOAD_CONST           (" was suppressed")
             62 BUILD_STRING         (2)
             63 CALL_METHOD_POSITIONAL(1)
             64 POP_TOP

  2     >>   65 POP_BLOCK
             66 ENTER_FINALLY
        >>   67 WITH_CLEANUP_START
             68 WITH_CLEANUP_FINISH
             69 JUMP                 (8)
        >>   70 RETURN_CONST         (None)
